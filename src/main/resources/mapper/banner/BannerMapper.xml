<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.crewstation.mapper.banner.BannerMapper">
<select id="getBanners">
    select v.id,
           v.file_id,
           v.file_path,
           v.file_name,
           v.file_origin_name,
           v.banner_id,
           v.created_datetime,
           v.updated_datetime,

           b.banner_order

    from view_file_banner_file v
        join tbl_banner b
            on b.id = v.banner_id

    order by b.banner_order asc, b.created_datetime desc
    limit 5;
</select>

    <insert id="insertBanner" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
        insert into tbl_banner (banner_order)
        values (#{bannerOrder})
    </insert>

    <insert id="insertBannerFile">
        insert into tbl_banner_file (file_id, banner_id)
        values (#{fileId}, #{bannerId})
    </insert>

    <update id="updateBannerFile">
        update tbl_banner
        set banner_order = #{bannerOrder}
        where id = #{bannerId}
    </update>

    <delete id="deleteBanner">
        delete from tbl_banner where id = #{bannerId}
    </delete>





</mapper>